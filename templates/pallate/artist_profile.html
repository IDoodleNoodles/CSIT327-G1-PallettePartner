{% extends "base.html" %}
{% load static %}

{% block title %}Artist Profile | PallettePartner{% endblock %}

{% block content %}
<!-- Artist Profile Header -->
<section class="artist-header-section bg-card-dark py-12 px-6 rounded-xl shadow-md">
    <div class="artist-profile flex items-center gap-6">
        {% if artist_profile and artist_profile.avatar %}
          <img src="{{ artist_profile.avatar.url }}" alt="{{ artist_user.username }}" class="rounded-full border-4 border-accent-purple shadow-lg w-[120px] h-[120px] object-cover">
        {% else %}
          <img src="{% static 'icon/profile_icon.png' %}" alt="Avatar" class="rounded-full border-4 border-accent-purple shadow-lg w-[120px] h-[120px] object-contain p-4 bg-[#0D1426]">
        {% endif %}
        <div class="profile-details text-text-light">
            <h1 class="text-3xl font-bold">{{ artist_user.get_full_name|default:artist_user.username }}</h1>
            <p class="text-accent-indigo">{{ artist_profile.art_type|default:"Artist" }}</p>
            <p class="flex items-center gap-2 text-gray-400 mt-1">
                <i class="fas fa-map-marker-alt"></i> ‚Äî
            </p>
            <div class="profile-stats flex gap-6 mt-4">
                <div><span class="text-2xl font-bold">0</span><p class="text-sm text-gray-400">Followers</p></div>
                <div><span class="text-2xl font-bold">0</span><p class="text-sm text-gray-400">Following</p></div>
                <div><span class="text-2xl font-bold">{{ user_collaborations|length }}</span><p class="text-sm text-gray-400">Projects</p></div>
                <div><span class="text-2xl font-bold">‚Äî</span><p class="text-sm text-gray-400">Rating</p></div>
            </div>
        </div>
        <div class="ml-auto flex gap-3">
            <button class="btn-primary bg-accent-purple px-4 py-2 rounded-lg hover:bg-accent-indigo">Follow</button>
            <a href="{% url 'pallate:dashboard' %}" class="btn-secondary border border-accent-purple px-4 py-2 rounded-lg hover:bg-accent-indigo">Message</a>
            <button class="btn-icon text-gray-300 hover:text-accent-purple" aria-label="Share profile"><i class="fas fa-share"></i></button>
        </div>
    </div>
</section>

<!-- Main Profile Content -->
<main class="main-content">
    <div class="container">
    <div class="profile-main grid grid-cols-1 md:grid-cols-3 gap-8 mt-10">
    <!-- Sidebar -->
    <aside class="profile-sidebar bg-card-dark p-6 rounded-lg shadow-md">
        <h3 class="text-lg font-semibold mb-3">About</h3>
    <p class="text-gray-300 mb-4">{{ artist_profile.bio|default:"This artist hasn't written a bio yet." }}</p>
        <ul class="space-y-2 text-gray-400 text-sm">
            <li><i class="fas fa-map-marker-alt mr-2"></i> San Francisco, CA</li>
            <li><i class="fas fa-calendar mr-2"></i> 8 years active</li>
            <li><i class="fas fa-clock mr-2"></i> Available for projects</li>
            <li><i class="fas fa-dollar-sign mr-2"></i> $50-150/hour</li>
        </ul>

        <h3 class="text-lg font-semibold mt-6 mb-3">Skills & Interests</h3>
                <div class="flex flex-wrap gap-2">
                        {% if artist_profile.art_type %}
                            <span class="tag bg-accent-purple text-white px-2 py-1 rounded">{{ artist_profile.art_type }}</span>
                        {% else %}
                            <span class="tag bg-card-dark border px-2 py-1 rounded">No skills listed</span>
                        {% endif %}
                </div>

        <h3 class="text-lg font-semibold mt-6 mb-3">Recent Activity</h3>
        <div class="space-y-2 text-sm text-gray-400">
            <p><i class="fas fa-heart text-red-400 mr-2"></i>Liked "Fantasy Book Cover Design"</p>
            <p><i class="fas fa-comment text-blue-400 mr-2"></i>Commented on "Urban Photography Series"</p>
            <p><i class="fas fa-plus text-green-400 mr-2"></i>Joined "Short Film Animation"</p>
        </div>
    </aside>

    <!-- Portfolio + Collaborations -->
    <div class="profile-content md:col-span-2 space-y-10">
        <section class="portfolio-section">
            <h2 class="text-xl font-bold mb-4">Portfolio</h2>
            <div class="portfolio-filters flex gap-3 mb-6">
                <button class="filter-btn bg-accent-purple text-white px-3 py-1 rounded">All</button>
                <button class="filter-btn bg-card-dark hover:bg-accent-indigo px-3 py-1 rounded">Character Design</button>
                <button class="filter-btn bg-card-dark hover:bg-accent-indigo px-3 py-1 rounded">Environment</button>
            </div>
                        {% if artworks %}
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                                {% for artwork in artworks %}
                                    <div class="bg-card-dark rounded-lg overflow-hidden border border-[#232B46]">
                                        {% if artwork.image %}
                                            <img src="{{ artwork.image.url }}" alt="{{ artwork.title }}" class="w-full h-40 object-cover">
                                        {% endif %}
                                        <div class="p-3 flex items-center justify-between">
                                            <h4 class="font-semibold">{{ artwork.title }}</h4>
                                            <a href="{% url 'pallate:toggle_favorite' artwork.id %}" class="hover:opacity-80 transition" title="{% if artwork.id in user_favorites %}Remove from favorites{% else %}Add to favorites{% endif %}">
                                                {% if artwork.id in user_favorites %}<span class="text-xl">‚ù§Ô∏è</span>{% else %}<span class="text-xl">ü§ç</span>{% endif %}
                                            </a>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        {% else %}
                            <div class="text-center text-[#9CA3AF] border border-[#232B46] rounded-xl py-8 bg-[#111827]">No artworks yet.</div>
                        {% endif %}
        </section>

        <section class="collaborations-section">
            <h2 class="text-xl font-bold mb-4">Active Collaborations</h2>
            
                        <div class="space-y-4">
                            {% if user_collaborations %}
                                {% for collab in user_collaborations %}
                                    <div class="collaboration-item bg-card-dark p-4 rounded-lg flex justify-between items-center border border-[#232B46]">
                                        <div>
                                            <h4 class="font-semibold text-white">{{ collab.title }}</h4>
                                            <p class="text-sm text-gray-400">By {{ collab.user.username }} ‚Ä¢ {{ collab.created_at|timesince }} ago</p>
                                        </div>
                                        <div class="flex gap-3">
                                            <a href="{% url 'pallate:collaboration_detail' collab.id %}" class="btn-outline border border-accent-purple px-3 py-1 rounded hover:bg-accent-purple">View</a>
                                            <a href="{% url 'pallate:collab_messages' collab.id %}" class="btn-outline border border-accent-purple px-3 py-1 rounded hover:bg-accent-purple">Chat</a>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="text-[#9CA3AF]">No collaborations yet.</div>
                            {% endif %}
                        </div>
        </section>
    </div>
    </div>
</main>
{% endblock %}
{% block extra_scripts %}
<script src="{% static 'js/favorites.js' %}"></script>
{% endblock %}